# mse_db_gen_tasks

## Установка зависимостей

Для корректной работы приложения (_если оно запускается не в docker-контейнере_) необходимо установить зависимости, указанные в `requirements.txt`, чтобы это сделать 
используйте команду:

```commandline
pip install -r requirements.txt
```

## Use cases
Данное приложение можно использовать в случае, если пользователю необходимо сгенерировать базу данных с случайными структурой и наполнением таблиц, а также последующим сохранением структуры базы данных в `.json` файл и генерацией дампа базы данных.
## Запуск Docker:
```
docker build -t gr3pr1/mse .
```
```
docker run gr3pr1/mse
```
## Запуск приложения (CLI):
* _Для того чтобы запустить приложение из docker-контейнера, в начале любой команды нужно ввести:_
```
docker run gr3pr1/mse
```
* _После этого одну из команд, указанных ниже_

1. Запуск генератора со случайным зерном 
   >В результате выполнения данной команды будет сгенерирован файл `db_tree.txt`, в котором будет представлена сгенерированная база в данных в формате `.json` файла, со структурой, которая представлена в файле `example.json`. При том генерация произойдет со случайным сидом.

```commandline
python3 ./run_gen.py
```
2. Запуск генератора с заданным зерном
   >Результат выполнения данной команды аналогичен результату выполнения команды, указанной выше, но в этом случае будет использован указанный сид для генерации таблицы.
```commandline
python3 ./run_gen.py [-s, --seed] SEED (число вместо SEED) 
```
3. Dump базы данных
    >В результате выполнения данной команды будет сгенерирован файл с указанным названием, в котором будет представлен обычный дамп базы данных.
```commandline
python3 ./run_gen.py [-d, --dump] PATH (path - строка пути к файлу)
```
4. Вывод подсказки
   >В результате выполнения данной команды будет выведена подсказка.
```commandline
python3 ./run_gen.py [-h, --help]
```
* В случае запуска программы внутри docker-контейнера, для того, чтобы достать данные из него, необходимо использовать следующие команды:
  * `docker ps -a` &ndash; данная команда выведет список всех запущенных и уже завершивших работу контейнеров.
  * `docker cp <container_id>:/path/to/file /path/to/copy` &ndash; данная команда скопирует нужный файл из контейнера.

## Запуск Unit-тестов:
Вызвать подсказку (-h необязательно)
```commandline
bash tests.sh -h
```
Запуск всех тестов 
```commandline
bash tests.sh run_all
```
Запуск тестов генератора последовательности случайных чисел
```commandline
bash tests.sh run_seq_gen_tests
```
Запуск тестов генератора баз данных
```commandline
bash tests.sh run_db_tests
```

## Пример работы
https://youtu.be/guJ0jzxemVc &ndash; демонстрация генерации дерева базы данных.

https://youtu.be/KGXc-MHRHDM &ndash; демонстрация дампа базы данных.

## Файл дерева генерации базы данных:
```
Дерево описывается в формате JSON.
Каждый узел дерева - это таблица, в которой можно создать поля и от которой можно перейти к другим соответствующим таблицам.
```
